# 版本历史

<cite>
**Referenced Files in This Document **   
- [Cargo.toml](file://Cargo.toml)
- [README.md](file://README.md)
- [src/lib.rs](file://src/lib.rs)
- [examples/basic_usage.rs](file://examples/basic_usage.rs)
</cite>

## 目录
1. [简介](#简介)
2. [v0.1.0 (初始版本)](#v010-初始版本)

## 简介
本文档记录了飞腾派时钟驱动（phytium-pi-clock）的版本演进历程，旨在帮助用户了解各版本的功能变化、兼容性影响以及升级注意事项。从v0.1.0初始版本开始，详细列出每个发布版本的时间、新增功能、改进项和修复的缺陷。对于重大变更，将说明其对现有用户的影响程度，并提供迁移建议。同时注明各版本对应的依赖项要求，为用户评估升级风险提供重要依据。

## v0.1.0 (初始版本)

**发布日期**: 未指定  
**Git标签**: v0.1.0  
**依赖项要求**: 
- `tock-registers` >= 0.8
- `log` >= 0.4
- `spin` >= 0.9

### 新增功能
- **基本时钟控制功能**: 实现了时钟频率设置与获取、时钟使能/禁用控制以及时钟状态监控等核心功能。
- **全局时钟管理**: 提供线程安全的全局时钟实例管理机制，通过`Once<Mutex<ClockHandle>>`确保单例模式的安全初始化。
- **高层API抽象**: 封装了便捷的API模块，包括`api::set_frequency`、`api::get_frequency`、`api::enable`、`api::disable`和`api::is_ready`等函数，简化了用户操作。

### 改进项
- **硬件抽象层**: 定义了`ClockController`结构体，封装了对时钟控制器寄存器的访问逻辑，提供了类型安全的寄存器操作接口。
- **配置系统**: 引入`ClockConfig`结构体用于描述时钟实例的配置信息，支持灵活的实例化方式。

### 修复的缺陷
- 无

### 对现有用户的影响
此为初始版本，不涉及向后兼容性问题。所有用户均需从该版本开始使用。

### 迁移建议
首次使用者可直接参考示例代码进行集成：
```rust
use phytium_pi_clock::{init_clock, lookup_config, api};

// 初始化时钟控制器
let config = lookup_config(0).unwrap();
init_clock(config).unwrap();

// 设置时钟频率为 25MHz
api::set_frequency(25_000_000).unwrap();
```

**Section sources**
- [Cargo.toml](file://Cargo.toml#L2)
- [README.md](file://README.md#L114-L119)
- [src/lib.rs](file://src/lib.rs#L1-L275)