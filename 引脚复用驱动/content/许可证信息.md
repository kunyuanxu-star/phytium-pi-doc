# 许可证信息

<cite>
**本文档引用的文件**
- [Cargo.toml](file://Cargo.toml)
- [src/lib.rs](file://src/lib.rs)
</cite>

## 目录
1. [引言](#引言)
2. [双许可证模式概述](#双许可证模式概述)
3. [GPL-2.0 许可证详解](#gpl-20-许可证详解)
4. [Apache-2.0 许可证详解](#apache-20-许可证详解)
5. [许可证选择与合规建议](#许可证选择与合规建议)
6. [源码文件中的许可证声明](#源码文件中的许可证声明)
7. [常见问题解答](#常见问题解答)
8. [结论](#结论)

## 引言

本项目 `phytium-pi-pinctrl` 是一个为 Phytium Pi 平台设计的引脚控制（pinctrl）驱动程序，采用 **GPL-2.0 OR Apache-2.0** 双许可证模式发布。该模式赋予用户在两种广泛使用的开源许可证之间进行选择的灵活性，以适应不同的使用场景和法律需求。

本文档旨在全面解释这两种许可证的法律含义、技术影响及合规要求，帮助开发者、企业用户和社区贡献者正确理解和使用本项目代码，避免潜在的法律风险。

## 双许可证模式概述

本项目的 `Cargo.toml` 文件中明确声明了其许可条款：

```toml
license = "GPL-2.0 OR Apache-2.0"
```

此声明意味着用户可以**选择**以下任一许可证来使用、修改和分发本项目代码：
- GNU General Public License version 2.0 (GPL-2.0)
- Apache License version 2.0 (Apache-2.0)

这种“或”（OR）关系是双许可证策略的核心，它极大地增强了项目的可采纳性。社区项目可以选择强著作权保护的 GPL-2.0，而商业项目则可以利用 Apache-2.0 的宽松条款进行集成。

**Section sources**
- [Cargo.toml](file://Cargo.toml#L7)

## GPL-2.0 许可证详解

GPL-2.0 是一种“著佐权”（copyleft）许可证，其核心原则是确保软件的自由性能够传递给所有后续用户。

### 主要要求
- **源码公开义务**：任何基于本项目代码的衍生作品（包括静态链接、动态链接或直接修改），在向公众分发时，**必须**以相同的 GPL-2.0 许可证公开其全部源代码。
- **传染性**：GPL-2.0 具有很强的“传染性”。如果您的专有固件或应用程序链接了此驱动（尤其是静态链接），那么整个组合软件可能被视为衍生作品，从而触发源码公开义务。
- **无专利授权**：GPL-2.0 不包含明确的专利授权条款，这在某些涉及专利技术的领域可能构成风险。

### 适用场景
GPL-2.0 非常适合希望保持代码完全开源、促进社区协作的项目。它能有效防止代码被私有化，确保所有改进都能回馈社区。

## Apache-2.0 许可证详解

Apache-2.0 是一种宽松的开源许可证，对用户的限制极少，特别受企业欢迎。

### 主要优势
- **明确的专利授权**：Apache-2.0 包含一项关键条款，即贡献者自动授予用户使用其相关专利的权利。这为商业应用提供了重要的法律保障，降低了专利诉讼风险。
- **宽松的再分发条件**：您可以将此驱动集成到闭源的专有软件中，并以您自己的许可证进行分发，无需公开您专有部分的源代码。
- **保留版权声明**：您只需在分发时保留原始的版权声明、许可证文本和 NOTICE 文件（如果存在）即可。

### 适用场景
Apache-2.0 非常适合需要将开源组件集成到商业产品、专有固件或 SaaS 服务中的企业级应用。它提供了最大的灵活性和法律确定性。

## 许可证选择与合规建议

用户可以根据自身项目的性质和目标，从两个许可证中选择最合适的：

| 使用场景 | 推荐许可证 | 理由 |
| :--- | :--- | :--- |
| 开源社区项目，希望保持强著佐权 | GPL-2.0 | 确保所有衍生作品保持开源，促进生态健康发展。 |
| 商业产品、专有固件、SaaS 服务 | Apache-2.0 | 允许闭源集成，提供明确的专利保护，降低法律风险。 |
| 不确定未来用途 | Apache-2.0 | 提供更大的回旋余地，即使将来商业化也无需担心合规问题。 |

### 合规注意事项
- **静态链接 vs 动态链接**：对于 GPL-2.0，静态链接通常被视为创建衍生作品，强制要求开源。动态链接的界定较为模糊，但为安全起见，建议视为衍生作品处理。Apache-2.0 对此无限制。
- **闭源部署**：若选择 GPL-2.0 且仅在内部网络部署（不对外分发），则不受源码公开义务约束。一旦分发（包括提供下载或预装设备销售），就必须开源。Apache-2.0 允许任何形式的闭源部署和分发。
- **修改代码**：无论选择哪个许可证，都必须保留原作者的版权声明。

## 源码文件中的许可证声明

虽然当前源码文件（如 `lib.rs`）尚未包含详细的版权和许可证声明，但强烈建议在每个源文件的头部添加标准的声明模板。

### 推荐的声明模板

#### 对于 Apache-2.0 选择
```rust
// Copyright (c) 2024 Phytium Pi Driver Team
//
// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or
// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license
// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your
// option. This file may not be copied, modified, or distributed
// except according to those terms.
```

#### 对于 GPL-2.0 选择
```rust
// Copyright (C) 2024 Phytium Pi Driver Team
//
// This program is free software: you can redistribute it and/or modify
// it under the terms of the GNU General Public License as published by
// the Free Software Foundation, either version 2 of the License, or
// (at your option) any later version.
//
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
// GNU General Public License for more details.
//
// You should have received a copy of the GNU General Public License
// along with this program. If not, see <http://www.gnu.org/licenses/>.
```

**Section sources**
- [src/lib.rs](file://src/lib.rs#L1-L4)

## 常见问题解答

### 是否可以在专有固件中使用此驱动？
- **可以，但需选择 Apache-2.0 许可证**。如果您选择 Apache-2.0，则可以将此驱动编译进您的专有固件中，并无需公开固件的源代码。如果选择 GPL-2.0，则您的固件很可能被视为衍生作品，必须以 GPL-2.0 开源。

### 修改后是否必须公开源码？
- **取决于您选择的许可证和分发方式**。
    - 如果您选择 **GPL-2.0** 并且**对外分发**了修改后的版本（无论是二进制还是源码形式），那么您**必须**公开整个衍生作品的完整源代码。
    - 如果您选择 **Apache-2.0**，则没有此义务，您可以选择不开源您的修改。
    - 如果您仅在内部使用（不分发），则无论选择哪个许可证，都没有公开源码的义务。

### “OR” 表示我可以同时使用两个许可证吗？
- 不完全是。您不能将同一份代码同时置于两个许可证之下。这里的“OR”意味着您作为用户，有权**选择其中一个**许可证来遵守。一旦您选择了某个许可证并开始使用，您就应该遵循该许可证的所有条款。

### 我如何表明我选择了哪个许可证？
- 您不需要向任何人正式声明。您的行为决定了您的选择。例如，如果您将修改后的代码以 Apache-2.0 发布，那么您就是在行使 Apache-2.0 赋予您的权利。只要您的行为符合所选许可证的要求，就是合规的。

## 结论

`phytium-pi-pinctrl` 项目采用的 GPL-2.0 OR Apache-2.0 双许可证模式是一种极具战略性的选择。它既尊重了开源社区对代码自由的追求，又满足了商业用户对灵活性和专利保护的需求。

我们鼓励所有使用者仔细阅读并理解这两个许可证的全文，根据自身的具体应用场景做出明智的选择。通过遵守相应的合规要求，我们可以共同促进开源硬件生态的繁荣发展。